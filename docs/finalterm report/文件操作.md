### 文件上传

1、用户通过网页端选择需要上传的文件，并点击 `upload` 之后，将请求发送给反向代理服务器

2、反向代理服务器根据负载均衡策略将请求转发到对应的服务器

3、服务器向 `JuiceFS` 发送存储文件的命令，此时并不会真正将文件存入 `JuiceFS` 中，而是将文件存入缓冲区，以保证数据一致性

4、服务器调用分布式打标模块，对多模态的数据进行打标，并将打标的结果传回服务器

5、打标成功后服务器尝试连接 `neo4j` 模块，并发送相应的命令

6、`neo4j` 接收到命令后将命令存入缓冲区而不是直接进行操作，并向服务器发送存入缓冲区成功的消息

7、此时如果之前所有的步骤都成功，则服务器开始在各个模块正式写入文件

8、首先调用 index 模块，生成向量化索引，并在 `neo4j`中建立节点

9、接着 `neo4j` 取出缓冲区的命令，根据向量化索引中的节点将文件和标签进行连边

10、将文件正式存入 `JuiceFS` 并更改网页端 `JSON` 文件的显示

### 文件下载

1、用户通过网页端点击需要下载的文件，点击 `select` 和 `download` 之后，将请求发送给反向代理服务器

2、反向代理服务器根据负载均衡策略将请求转发到对应的服务器

3、服务器向 `JuiceFS` 发送下载文件的命令，直接从 `JuiceFS` 的挂载目录下读取相应内容，并返回到网页端

### 文件删除

文件删除和文件上传的过程大致相同，只是不需要调用打标的模块

### 文件搜索

1、用户通过网页端在 `search` 框中输入需要搜索的文件的内容，点击 `search` 之后，将请求发送给反向代理服务器

2、反向代理服务器根据负载均衡策略将请求转发到对应的服务器

3、服务器根据收到的请求调用 `serach` 模块