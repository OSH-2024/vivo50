## juiceFS

### 优势

+ JuiceFS 是一款面向云原生设计的高性能分布式文件系统，提供了丰富的 API，适用于各种形式数据的管理、分析、归档、备份，可以在不修改代码的前提下无缝对接大数据、机器学习、人工智能等应用平台，为其提供海量、弹性、低价的高性能存储。运维人员不用再为可用性、灾难恢复、监控、扩容等工作烦恼，专注于业务开发，提升研发效率。
+ 操作简单：使用mount命令挂载juiceFS后，可以直接把juicefs当作本地磁盘使用。

在网页端上传文件，如果打标，构建向量化索引，存入neo4j等各个过程都成功的话就会将文件存入服务器所在主机挂载的juicefs中，用于后续下载等等操作。

### 一致性

分布式系统，往往需要在缓存和一致性之间进行取舍。JuiceFS 由于其元数据分离架构，需要从元数据、文件数据（对象存储）、文件数据本地缓存三方面来思考一致性问题：

对于[元数据缓存](https://juicefs.com/docs/zh/community/guide/cache#metadata-cache)，JuiceFS 默认的挂载设置满足「关闭再打开（close-to-open）」一致性，也就是说一个客户端修改并关闭文件之后，其他客户端重新打开这个文件都会看到最新的修改。与此同时，默认的挂载参数设置了 1 秒的内核元数据缓存，满足了一般场景的需要。

对于对象存储，JuiceFS 将文件分成一个个数据块（默认 4MiB），赋予唯一 ID 并上传至对象存储服务。文件的任何修改操作都将生成新的数据块，原有块保持不变，所以不用担心数据缓存的一致性问题，因为一旦文件被修改过了，JuiceFS 会从对象存储读取新的数据块。而老的失效数据块，也会随着[回收站](https://juicefs.com/docs/zh/community/security/trash)或碎片合并机制被删除，避免对象存储泄露。

[本地数据缓存](https://juicefs.com/docs/zh/community/guide/cache#client-read-cache)也是以对象存储的数据块做为最小单元。一旦文件数据被下载到缓存盘，一致性就和缓存盘可靠性相关，如果磁盘数据发生了篡改，客户端也会读取到错误的数据。对于这种担忧，可以配置合适的 [`--verify-cache-checksum`](https://juicefs.com/docs/zh/community/command_reference#mount) 策略，确保缓存盘数据完整性。

### 监控

JuiceFS 自带的控制台可以监控存储模块的各项性能，不需要本机再部署复杂的监控模块